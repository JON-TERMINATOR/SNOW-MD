function a67_0x5521(_0x28923f,_0x13c979){const _0x55ad=a67_0x4e16();return a67_0x5521=function(_0x17f6ca,_0x458547){_0x17f6ca=_0x17f6ca-0x11c;let _0x4e169a=_0x55ad[_0x17f6ca];if(a67_0x5521['tgwMXb']===undefined){var _0x5521af=function(_0x2c6a0b){const _0x50b788='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x574217='',_0x48e577='',_0x14094c=_0x574217+_0x5521af;for(let _0x4ae948=0x0,_0x5741d4,_0xc55f7c,_0x217720=0x0;_0xc55f7c=_0x2c6a0b['charAt'](_0x217720++);~_0xc55f7c&&(_0x5741d4=_0x4ae948%0x4?_0x5741d4*0x40+_0xc55f7c:_0xc55f7c,_0x4ae948++%0x4)?_0x574217+=_0x14094c['charCodeAt'](_0x217720+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5741d4>>(-0x2*_0x4ae948&0x6)):_0x4ae948:0x0){_0xc55f7c=_0x50b788['indexOf'](_0xc55f7c);}for(let _0x20473f=0x0,_0x454818=_0x574217['length'];_0x20473f<_0x454818;_0x20473f++){_0x48e577+='%'+('00'+_0x574217['charCodeAt'](_0x20473f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x48e577);};a67_0x5521['AYKCtU']=_0x5521af,_0x28923f=arguments,a67_0x5521['tgwMXb']=!![];}const _0x1a2e73=_0x55ad[0x0],_0x36c88b=_0x17f6ca+_0x1a2e73,_0x1782ac=_0x28923f[_0x36c88b];if(!_0x1782ac){const _0x1fb01a=function(_0x4c9c95){this['CRnYPw']=_0x4c9c95,this['egciYn']=[0x1,0x0,0x0],this['QBAPON']=function(){return'newState';},this['DMUQQH']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['XxKlhz']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1fb01a['prototype']['yVfCem']=function(){const _0x38f4b6=new RegExp(this['DMUQQH']+this['XxKlhz']),_0x2e62b3=_0x38f4b6['test'](this['QBAPON']['toString']())?--this['egciYn'][0x1]:--this['egciYn'][0x0];return this['UfijAJ'](_0x2e62b3);},_0x1fb01a['prototype']['UfijAJ']=function(_0x2fa325){if(!Boolean(~_0x2fa325))return _0x2fa325;return this['xtrwfh'](this['CRnYPw']);},_0x1fb01a['prototype']['xtrwfh']=function(_0x29e445){for(let _0x5abfad=0x0,_0xcfe16a=this['egciYn']['length'];_0x5abfad<_0xcfe16a;_0x5abfad++){this['egciYn']['push'](Math['round'](Math['random']())),_0xcfe16a=this['egciYn']['length'];}return _0x29e445(this['egciYn'][0x0]);},new _0x1fb01a(a67_0x5521)['yVfCem'](),_0x4e169a=a67_0x5521['AYKCtU'](_0x4e169a),_0x28923f[_0x36c88b]=_0x4e169a;}else _0x4e169a=_0x1782ac;return _0x4e169a;},a67_0x5521(_0x28923f,_0x13c979);}const a67_0x597848=a67_0x5521;(function(_0x32c0da,_0x35fc3a){const _0x3a9e28=a67_0x5521,_0x32004a=_0x32c0da();while(!![]){try{const _0x1596de=-parseInt(_0x3a9e28(0x136))/0x1+parseInt(_0x3a9e28(0x13b))/0x2*(-parseInt(_0x3a9e28(0x11f))/0x3)+-parseInt(_0x3a9e28(0x11c))/0x4+-parseInt(_0x3a9e28(0x121))/0x5*(parseInt(_0x3a9e28(0x130))/0x6)+-parseInt(_0x3a9e28(0x13a))/0x7*(-parseInt(_0x3a9e28(0x123))/0x8)+-parseInt(_0x3a9e28(0x12a))/0x9+parseInt(_0x3a9e28(0x120))/0xa*(parseInt(_0x3a9e28(0x12e))/0xb);if(_0x1596de===_0x35fc3a)break;else _0x32004a['push'](_0x32004a['shift']());}catch(_0x338df3){_0x32004a['push'](_0x32004a['shift']());}}}(a67_0x4e16,0x403d7));const a67_0x458547=(function(){let _0x50940f=!![];return function(_0x541041,_0x15c956){const _0x2ec13d=a67_0x5521,_0x2de7b2={'qutQa':_0x2ec13d(0x138)},_0x3106f4=_0x50940f?function(){const _0x3a3b94=_0x2ec13d;if(_0x15c956){if(_0x3a3b94(0x138)===_0x2de7b2[_0x3a3b94(0x122)]){const _0x5ab8ca=_0x15c956[_0x3a3b94(0x131)](_0x541041,arguments);return _0x15c956=null,_0x5ab8ca;}else{const _0x4b5333=_0x5854d3['apply'](_0x4fba36,arguments);return _0x42e8bb=null,_0x4b5333;}}}:function(){};return _0x50940f=![],_0x3106f4;};}()),a67_0x17f6ca=a67_0x458547(this,function(){const _0x593626=a67_0x5521;return a67_0x17f6ca[_0x593626(0x139)]()['search']('(((.+)+)+)+$')[_0x593626(0x139)]()[_0x593626(0x132)](a67_0x17f6ca)[_0x593626(0x13c)](_0x593626(0x134));});function a67_0x4e16(){const _0x382c5b=['mtzfwu9LrgW','zg9JDw1LBNrZ','z2v0','ywrKu2vZC2LVBG','AgfZq3jLzhm','Ahr0Chm6lY96B2TVDs1ZzxnZAw9UlwfWAs52zxjJzwWUyxbW','zxHWB3j0CW','mJy0mJq2m2XNvvvpzq','CMvTB3zLrg9JC0zYB21jza','Bg9HzhneB2nZ','C2vZC2LVBKfWAq','mZC3nJncvLDZr0K','yxHPB3m','mtCWmJjQChPACKK','yxbWBhK','y29UC3rYDwn0B3i','l3nLC3nPB24V','kcGOlISPkYKRksSK','tM8Gzg9JDw1LBNrZigzVDw5K','nZiYnZz4s2jLzMO','C3LUyW','v0fyr3G','Dg9tDhjPBMC','nte0mduYBNrSzhrx','mtz6BhrJBve','C2vHCMnO','rgfjru8','mti3nJGWwuT4AgHZ','z2v0u2vZC2LVBG','CMvSB2fKu2vZC2LVBG','nJaWntr0qw9VwNG','mZiYme1xBu10CW','nZyWyvroB3LL','Cxv0uwe'];a67_0x4e16=function(){return _0x382c5b;};return a67_0x4e16();}a67_0x17f6ca();const sessionDb=require('../../bdd/session'),authDb=require('../../bdd/auth'),axios=require(a67_0x597848(0x12f));class SessionManager{[a67_0x597848(0x12d)]=a67_0x597848(0x128);#userId=null;#shouldReloadSession=![];#userSession=null;constructor(_0x29f882,_0xb4ab1f=null){this.#userId=_0x29f882,this.#userSession=_0xb4ab1f;}async[a67_0x597848(0x137)](){const _0x5aa655=a67_0x597848,_0x4e414c={'DaIEO':function(_0x2e7118,_0x130203){return _0x2e7118==_0x130203;}},_0x20dcae=await sessionDb[_0x5aa655(0x11d)](this.#userId);if(!_0x20dcae){await sessionDb[_0x5aa655(0x126)](this.#userId,this.#userSession);if(this.#userSession)this.#shouldReloadSession=!![];}if(_0x20dcae?.['id']==this.#userSession){if(_0x4e414c[_0x5aa655(0x13d)](this.#userSession,null))return;return await this.#checkIfShouldReconnect();}await authDb[_0x5aa655(0x12b)](this.#userId),await sessionDb[_0x5aa655(0x126)](this.#userId,this.#userSession),this.#shouldReloadSession=!![];}async['fetchForDocs'](_0x21de98){const _0xb4c21d=a67_0x597848,_0xe242b6=await axios[_0xb4c21d(0x125)](this['sessionApi']+_0xb4c21d(0x133)+_0x21de98+'?remove=true');if(_0xe242b6?.['data']?.['found'])return _0xe242b6['data'][_0xb4c21d(0x124)];else throw new Error(_0xb4c21d(0x135));}get['shouldReloadSession'](){return this.#shouldReloadSession;}async[a67_0x597848(0x11e)](){const _0x3176bc=a67_0x597848,_0xb28e47=await this['fetchForDocs'](this.#userSession);await authDb[_0x3176bc(0x12c)](this.#userId,_0xb28e47);}async #checkIfShouldReconnect(){const _0x3aee0d=a67_0x597848;return this.#shouldReloadSession=!await authDb[_0x3aee0d(0x127)](this.#userId);}}module[a67_0x597848(0x129)]=SessionManager;