const a63_0x4a65f6=a63_0x1950;function a63_0x1950(_0x1121a6,_0xe1a297){const _0x3600ee=a63_0x1a3d();return a63_0x1950=function(_0x22f204,_0x4875cd){_0x22f204=_0x22f204-0x1df;let _0x1a3d6f=_0x3600ee[_0x22f204];if(a63_0x1950['ByRKYW']===undefined){var _0x1950ec=function(_0x496ce4){const _0x2e27a7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x38147e='',_0x358147='',_0x321667=_0x38147e+_0x1950ec;for(let _0x239744=0x0,_0x47c32e,_0x3db26c,_0x16528a=0x0;_0x3db26c=_0x496ce4['charAt'](_0x16528a++);~_0x3db26c&&(_0x47c32e=_0x239744%0x4?_0x47c32e*0x40+_0x3db26c:_0x3db26c,_0x239744++%0x4)?_0x38147e+=_0x321667['charCodeAt'](_0x16528a+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x47c32e>>(-0x2*_0x239744&0x6)):_0x239744:0x0){_0x3db26c=_0x2e27a7['indexOf'](_0x3db26c);}for(let _0x37e30e=0x0,_0x35cfaa=_0x38147e['length'];_0x37e30e<_0x35cfaa;_0x37e30e++){_0x358147+='%'+('00'+_0x38147e['charCodeAt'](_0x37e30e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x358147);};a63_0x1950['qmbvOZ']=_0x1950ec,_0x1121a6=arguments,a63_0x1950['ByRKYW']=!![];}const _0x535bb5=_0x3600ee[0x0],_0x5277ae=_0x22f204+_0x535bb5,_0x23e983=_0x1121a6[_0x5277ae];if(!_0x23e983){const _0xf42cc6=function(_0x373157){this['WKOkjz']=_0x373157,this['eEZhWB']=[0x1,0x0,0x0],this['rkAQoN']=function(){return'newState';},this['VmOIPV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['kPshZW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xf42cc6['prototype']['CecLdr']=function(){const _0x95380b=new RegExp(this['VmOIPV']+this['kPshZW']),_0x58cfb1=_0x95380b['test'](this['rkAQoN']['toString']())?--this['eEZhWB'][0x1]:--this['eEZhWB'][0x0];return this['cmyqTH'](_0x58cfb1);},_0xf42cc6['prototype']['cmyqTH']=function(_0x4bc2a0){if(!Boolean(~_0x4bc2a0))return _0x4bc2a0;return this['nBpKXx'](this['WKOkjz']);},_0xf42cc6['prototype']['nBpKXx']=function(_0x187d40){for(let _0x3f5696=0x0,_0x15684b=this['eEZhWB']['length'];_0x3f5696<_0x15684b;_0x3f5696++){this['eEZhWB']['push'](Math['round'](Math['random']())),_0x15684b=this['eEZhWB']['length'];}return _0x187d40(this['eEZhWB'][0x0]);},new _0xf42cc6(a63_0x1950)['CecLdr'](),_0x1a3d6f=a63_0x1950['qmbvOZ'](_0x1a3d6f),_0x1121a6[_0x5277ae]=_0x1a3d6f;}else _0x1a3d6f=_0x23e983;return _0x1a3d6f;},a63_0x1950(_0x1121a6,_0xe1a297);}function a63_0x1a3d(){const _0x19625f=['ihDPDgGGywn0Aw9Uia','AK53wwG','kcGOlISPkYKRksSK','D2jsChq','z0PjzMS','nZqYmtm0Be1jDMvV','igvZDcbKzwPHigfJDgLM','ywn0Aw9U','z2vUzxjHDgvdBwq','sgXnyvK','mty1ntfyrNrMEvm','y29UC3rYDwn0B3i','txDLBgK','kIdINQhVUi8Gx3bVDxiGywn0AxzLCIbSysbMB25JDgLVBL8G4PYfcUkaOIaQ','z0X5rhO','ig4Nzxn0ihbHCYb2ywXPzguUieXLCYbHy3rPB25ZihzHBgLKzxmGC29UDdOG','kIdINQhVUi8Gx3bVDxiGBgeGzmoPC2fJDgL2zxjFiokDJaOk4PQz77IpicPdAgfUz2vYigWNywn0Aw9UkIa6cUkaOIaQ','tMzrB24','zMLUzej5ugS','lI4VEM9RB3u','C2vHCMnO','C3vWCa','lI4VlI4VyMrKl19PBMrLEa','yxbWBhK','C2v0','kIdINQhVUi8Gx0fJDgLVBIa6xYdWN5Er77IpifjLDgLYzxik4OcIicO','igvZDcbTywLUDgvUyw50ia','r09JzKG','zgLZywjSzwq','odiWAMDSBwr3','tgXxzwC','z2v0','igvZDcbTywLUDgvUyw50igrLC2fJDgL2zq','cVcFM6dVUi8GkKnVBMzPz3vYyxrPB24GzguG','u1rbvevt','thn4tvK','yM9Uwgm','u1rssu5h','mtq0otqWmMXNEhndAa','DhjPBq','shn4seu','igzVCIbQAwqG','qunusu9ouW','AM9PBG','kIdINQhVUi8Gx0fJDgLVBIa6xYdWN5suief2zxj0Axi','BM9Kzs1JywnOzq','vw5LigvYCMv1CIbLC3qGC3vYDMvUDwuGlcb2zwLSBgv6ig5VDxmGzw4GAw5MB3jTzxOGC3vYigXLigzVCNvTihnPihbLCMnPC3rHBNq','kGOk4OcIicO','C2vXDwvSAxPL','uezTC20','DxbZzxj0','C3LUyW','CMv0AxjLCG','zfLkwNu','mJm0mta1uKjZv21p','ywn0Aw9UlW','igvZDcbKzwPHigrLC2fJDgL2zq','zw5HyMXLzezVCKPPza','x2LUAxq','zxrHDa','zgvMAw5L','Bg9N','igfJDgLVBI8','BwLowLq','n3HcrKD6ua','zvLsqvi','zxjYB3i','C3PVwvq','mtaXowHqyK1iAa','mJbqEwfHD0q','zgvSzxrL','DMfSDwvZ','mJmXmdi0zM9rAwDU','v3vev3i','zw5HyMXLza','u0jfy2e','mte1mda4m1PrEvHSAa','rxjYB3iGDxbKyxrPBMCGAMLKia','nZG2D0DLyw1j','C3rHCNrZv2L0Aa','D2fYBG'];a63_0x1a3d=function(){return _0x19625f;};return a63_0x1a3d();}(function(_0x29ecb5,_0x77d476){const _0x3af9fe=a63_0x1950,_0x49a64d=_0x29ecb5();while(!![]){try{const _0xb16324=parseInt(_0x3af9fe(0x1ed))/0x1*(parseInt(_0x3af9fe(0x1f7))/0x2)+parseInt(_0x3af9fe(0x220))/0x3+parseInt(_0x3af9fe(0x1ee))/0x4*(-parseInt(_0x3af9fe(0x1df))/0x5)+parseInt(_0x3af9fe(0x1ff))/0x6*(-parseInt(_0x3af9fe(0x1e9))/0x7)+parseInt(_0x3af9fe(0x1f1))/0x8+parseInt(_0x3af9fe(0x204))/0x9*(-parseInt(_0x3af9fe(0x217))/0xa)+-parseInt(_0x3af9fe(0x1f5))/0xb;if(_0xb16324===_0x77d476)break;else _0x49a64d['push'](_0x49a64d['shift']());}catch(_0x3fc678){_0x49a64d['push'](_0x49a64d['shift']());}}}(a63_0x1a3d,0x49146));const a63_0x4875cd=(function(){const _0x5b0ff4=a63_0x1950,_0x397b12={'gJIfk':function(_0x2ecf91,_0x3f3f6c){return _0x2ecf91!==_0x3f3f6c;},'MeGDu':_0x5b0ff4(0x21e)};let _0x1fc269=!![];return function(_0x3de650,_0x3205c0){const _0x57eef2=_0x1fc269?function(){const _0x56927f=a63_0x1950;if(_0x397b12[_0x56927f(0x1fe)](_0x397b12['MeGDu'],_0x397b12['MeGDu'])){if(_0x4d7627){const _0x2898bb=_0x3484f0[_0x56927f(0x211)](_0x3ba654,arguments);return _0x3b248f=null,_0x2898bb;}}else{if(_0x3205c0){const _0x252213=_0x3205c0[_0x56927f(0x211)](_0x3de650,arguments);return _0x3205c0=null,_0x252213;}}}:function(){};return _0x1fc269=![],_0x57eef2;};}()),a63_0x22f204=a63_0x4875cd(this,function(){const _0x3e71d6=a63_0x1950,_0x345e95={'dYJZu':_0x3e71d6(0x1fc)};return a63_0x22f204['toString']()[_0x3e71d6(0x20e)](_0x3e71d6(0x1fc))['toString']()[_0x3e71d6(0x205)](a63_0x22f204)['search'](_0x345e95[_0x3e71d6(0x22f)]);});a63_0x22f204();const NodeCache=require(a63_0x4a65f6(0x227)),{DB}=require(a63_0x4a65f6(0x210)),{zokou}=require(a63_0x4a65f6(0x20d)),{DataTypes,Model}=require(a63_0x4a65f6(0x22a));class EventStateManager{#tableName;#db=null;[a63_0x4a65f6(0x1e3)]=null;[a63_0x4a65f6(0x21c)]={'enabled':'oui','disabled':'non'};['ACTIONS']={'remove':a63_0x4a65f6(0x22e),'delete':a63_0x4a65f6(0x20f),'warn':'warn'};#defaultAction=this[a63_0x4a65f6(0x224)]['remove'];#defaultState=this[a63_0x4a65f6(0x21c)]['disabled'];#cache;constructor(_0x1efca8,_0x179953=new NodeCache()){const _0x192931=a63_0x4a65f6;this.#tableName=_0x1efca8,this.#cache=_0x179953,this[_0x192931(0x1e3)]=this.#createTable();}async #createTable(){const _0x236d7c=a63_0x4a65f6;this.#db=DB[_0x236d7c(0x1e5)](this.#tableName,{'jid':{'type':DataTypes[_0x236d7c(0x21f)],'primaryKey':!![]},'etat':{'type':DataTypes[_0x236d7c(0x21f)],'defaultValue':this.#defaultState},'action':{'type':DataTypes[_0x236d7c(0x21f)],'defaultValue':this.#defaultAction}}),await this.#db[_0x236d7c(0x22d)]();}async #addOrUpdateJid(_0x54788e,_0x30fbe0=this.#defaultState){const _0x45cd89=a63_0x4a65f6;await this['_init'],await this.#db[_0x45cd89(0x22c)]({'jid':_0x54788e,'etat':_0x30fbe0});const _0x2f6d83=this.#cache[_0x45cd89(0x219)](_0x54788e)||{};this.#cache[_0x45cd89(0x212)](_0x54788e,{..._0x2f6d83,'etat':_0x30fbe0});}async #updateJidAction(_0x4ab500,_0x11656a=this.#defaultAction){const _0x3e7eec=a63_0x4a65f6,_0x2f9e1e={'NfQon':'FkIUH','GOcfH':_0x3e7eec(0x21d)};try{if(_0x2f9e1e[_0x3e7eec(0x20b)]!==_0x2f9e1e[_0x3e7eec(0x215)]){await this['_init'],await this.#db['upsert']({'jid':_0x4ab500,'action':_0x11656a});const _0x2c7fd7=this.#cache['get'](_0x4ab500)||{};this.#cache[_0x3e7eec(0x212)](_0x4ab500,{..._0x2c7fd7,'action':_0x11656a});}else return _0x398cbc(_0xe8e675);}catch(_0x5ba386){console['error'](_0x3e7eec(0x1f6)+_0x4ab500+'\x20with\x20action\x20'+_0x11656a+':',_0x5ba386);throw _0x5ba386;}}async['enabledForJid'](_0x3f6281){const _0x2f5a5d=a63_0x4a65f6,_0x48dbd6={'gLyDz':function(_0x1f2646,_0x99e6b9){return _0x1f2646!==_0x99e6b9;},'HsxHE':function(_0x19af6e,_0x187afd){return _0x19af6e!==_0x187afd;},'PFmsm':function(_0x9db870,_0x1d1d0d){return _0x9db870!==_0x1d1d0d;}};try{const _0x2a608e=this.#cache[_0x2f5a5d(0x219)](_0x3f6281);if(_0x48dbd6[_0x2f5a5d(0x208)](_0x2a608e?.[_0x2f5a5d(0x1e4)],undefined))return _0x48dbd6[_0x2f5a5d(0x222)](_0x2a608e[_0x2f5a5d(0x1e4)],this.#defaultState);await this['_init'];const _0x21f2dc=await this.#db[_0x2f5a5d(0x20c)](_0x3f6281);if(_0x21f2dc){const _0x504791=_0x21f2dc[_0x2f5a5d(0x219)]({'plain':!![]});return this.#cache['set'](_0x3f6281,{...this.#cache[_0x2f5a5d(0x219)](_0x3f6281)||{},'etat':_0x504791[_0x2f5a5d(0x1e4)]}),_0x48dbd6[_0x2f5a5d(0x22b)](_0x504791['etat'],this.#defaultState);}return![];}catch(_0x1847c8){return console['error']('Error\x20checking\x20enabled\x20state\x20for\x20jid\x20'+_0x3f6281+':',_0x1847c8),![];}}async['getActionForJid'](_0x4790ea){const _0x1efbb8=a63_0x4a65f6;try{const _0x3f57e2=this.#cache[_0x1efbb8(0x219)](_0x4790ea);if(_0x3f57e2?.[_0x1efbb8(0x201)])return _0x3f57e2[_0x1efbb8(0x201)];await this[_0x1efbb8(0x1e3)];const _0x3006a3=await this.#db['findByPk'](_0x4790ea);if(_0x3006a3){const _0xd13a1b=_0x3006a3['get']({'plain':!![]});return this.#cache['set'](_0x4790ea,{...this.#cache['get'](_0x4790ea)||{},'action':_0xd13a1b[_0x1efbb8(0x201)]}),_0xd13a1b['action'];}return this.#defaultAction;}catch(_0x1626ec){console[_0x1efbb8(0x1eb)]('Error\x20getting\x20action\x20for\x20jid\x20'+_0x4790ea+':',_0x1626ec);throw _0x1626ec;}}[a63_0x4a65f6(0x202)](_0x325b18){const _0x5cf140=a63_0x4a65f6,_0x2c156e={'LlWeg':function(_0x281b28,_0x5031cc){return _0x281b28(_0x5031cc);},'AqNqM':function(_0x156363,_0x3bada4){return _0x156363(_0x3bada4);},'szoYT':'Vous\x20n\x27avez\x20pas\x20les\x20permissions\x20necessaires','jNwYh':function(_0x315e9e,_0x26f4cc){return _0x315e9e==_0x26f4cc;},'SBEca':function(_0x240f5d,_0x6b9d63){return _0x240f5d!==_0x6b9d63;},'WuDWr':_0x5cf140(0x203),'MkZXZ':function(_0x24e00d,_0x1f23fd){return _0x24e00d(_0x1f23fd);},'rownO':'gyBti','vsccX':function(_0xdaa535,_0x4566c3,_0x389577){return _0xdaa535(_0x4566c3,_0x389577);}},{nomCom:_0xc710e4}=_0x325b18;_0x2c156e['vsccX'](zokou,{..._0x325b18},async(_0x8607f4,_0x4e2114,_0x537cff)=>{const _0x29e3de=_0x5cf140,_0x3c5223={'eYRAR':function(_0x2590b1,_0x1fca16){const _0x54cf1e=a63_0x1950;return _0x2c156e[_0x54cf1e(0x218)](_0x2590b1,_0x1fca16);}},{verifGroupe:_0x22db5b,verifAdmin:_0x2a03bb,ms:_0x5a0cfa,arg:_0x52965d,superUser:_0x4069a5,repondre:_0x193952}=_0x537cff;if(!_0x22db5b)return _0x2c156e['AqNqM'](_0x193952,'Cette\x20commande\x20est\x20reserver\x20uniquement\x20pour\x20les\x20groupes');if(!_0x4069a5&&!_0x2a03bb)return _0x193952(_0x2c156e[_0x29e3de(0x1ec)]);try{const _0x325cdc=_0x29e3de(0x21b)+_0xc710e4+_0x29e3de(0x229)+_0xc710e4+'\x20'+this['STATES'][_0x29e3de(0x1f3)]+_0x29e3de(0x207)+_0xc710e4+'\x20'+this['STATES'][_0x29e3de(0x216)]+_0x29e3de(0x20a)+_0xc710e4+_0x29e3de(0x1e7)+this['ACTIONS']['remove']+_0x29e3de(0x213)+_0xc710e4+_0x29e3de(0x1e7)+this[_0x29e3de(0x224)][_0x29e3de(0x1ef)]+'*\x20➡️\x20_Action\x20:_\x20⚠️\x20Supprimer\x0a•\x20*'+_0xc710e4+_0x29e3de(0x1e7)+this['ACTIONS'][_0x29e3de(0x1f9)]+_0x29e3de(0x226);if(!_0x52965d||!_0x52965d[0x0]||_0x2c156e[_0x29e3de(0x1fb)](_0x52965d[_0x29e3de(0x225)]('')['trim'](),''))return _0x193952(_0x325cdc);const _0x1054ea=_0x52965d[0x0]['toLowerCase']();if(_0x1054ea==this[_0x29e3de(0x21c)][_0x29e3de(0x1f3)]){if(await this[_0x29e3de(0x1e2)](_0x8607f4))return _0x2c156e[_0x29e3de(0x1f4)](_0x2c156e[_0x29e3de(0x1f2)],'LEgDg')?_0x2c156e['MkZXZ'](_0x193952,_0xc710e4+_0x29e3de(0x200)):_0x3c5223[_0x29e3de(0x1ea)](_0x54308c,'L\x27action\x20'+_0x23c289+_0x29e3de(0x209)+_0x20e804[_0x29e3de(0x1f0)](this['ACTIONS'])[_0x29e3de(0x225)](',\x20'));return await this.#addOrUpdateJid(_0x8607f4,_0x1054ea),_0x193952(_0xc710e4+'\x20est\x20maintenant\x20actif');}else{if(_0x1054ea==this['STATES'][_0x29e3de(0x216)]){if(!await this['enabledForJid'](_0x8607f4))return _0x193952(_0xc710e4+_0x29e3de(0x1e1));return await this.#addOrUpdateJid(_0x8607f4,_0x1054ea),_0x193952(_0xc710e4+_0x29e3de(0x21a));}else{if(_0x1054ea[_0x29e3de(0x1f8)](_0x29e3de(0x1e0))){if(_0x29e3de(0x1fd)===_0x29e3de(0x206)){_0xf63b1e[_0x29e3de(0x1eb)](_0x29e3de(0x1f6)+_0x1f949f+_0x29e3de(0x1fa)+_0x33515e+':',_0x39ac8b);throw _0x37b581;}else{const _0x19f8ce=_0x1054ea['split']('/')[0x1][_0x29e3de(0x221)]()['toLowerCase']();if(!Object['values'](this['ACTIONS'])['includes'](_0x19f8ce)){if(_0x2c156e[_0x29e3de(0x1f4)](_0x29e3de(0x1e8),_0x2c156e['rownO']))return _0x193952('L\x27action\x20'+_0x19f8ce+_0x29e3de(0x209)+Object[_0x29e3de(0x1f0)](this[_0x29e3de(0x224)])[_0x29e3de(0x225)](',\x20'));else{const _0x83ed26=_0x37e30e?function(){if(_0x4bc2a0){const _0x2d4e25=_0x55b0f0['apply'](_0x3ba779,arguments);return _0x58c9f5=null,_0x2d4e25;}}:function(){};return _0x58cfb1=![],_0x83ed26;}}return await this.#updateJidAction(_0x8607f4,_0x19f8ce),_0x193952('L\x27action\x20de\x20'+_0xc710e4+_0x29e3de(0x214)+_0x19f8ce);}}else return _0x193952(_0x325cdc);}}}catch(_0x3563b9){return console[_0x29e3de(0x1e6)]('Error\x20setting\x20'+_0xc710e4+_0x29e3de(0x223)+_0x8607f4+':\x20'+_0x3563b9),_0x2c156e[_0x29e3de(0x218)](_0x193952,_0x29e3de(0x228));}});}}module['exports']=EventStateManager;